{"ast":null,"code":"import _defineProperty from \"/home/praveen/Documents/Praveen-codes/HRM/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/praveen/Documents/Praveen-codes/HRM/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/praveen/Documents/Praveen-codes/HRM/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/praveen/Documents/Praveen-codes/HRM/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/praveen/Documents/Praveen-codes/HRM/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/praveen/Documents/Praveen-codes/HRM/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/praveen/Documents/Praveen-codes/HRM/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/praveen/Documents/Praveen-codes/HRM/client/src/component/login/login.js\";\nimport { Form, Icon, Input, Button, Checkbox, message, notification } from \"antd\";\nimport \"./index.css\";\nimport React from \"react\";\nimport { Row, Col } from \"antd\"; // import {Animated} from \"react-animated-css\";\n// import logo from '../image/logo.jpg'\n\nimport { withRouter } from \"react-router\";\nimport { Mutation, Query } from \"react-apollo\";\nimport { SIGNIN_USER, GET_ALL_USER, GET_CURRENT_USER } from \"../../queries/index\";\nimport { Alert, Result } from \"antd\";\nimport Spinner from \"../spinner/index\";\nimport { Redirect } from \"react-router-dom\";\nimport Notification from \"../dashboard/notification/\";\nimport Errors from \"../dashboard/error/index\"; // import BackgroundImage from 'react-background-image-loader';\n\nvar FormItem = Form.Item;\nvar inintialState = {\n  username: \"\",\n  password: \"\",\n  message: \"Sucessfuly Logged In \",\n  isLoading: true,\n  redirectToReferrer: false\n};\nvar fakeAuth = {\n  isAuthenticated: true,\n  authenticate: function authenticate(cb) {\n    this.isAuthenticated = true;\n    setTimeout(cb, 100);\n  },\n  signout: function signout(cb) {\n    this.isAuthenticated = false;\n    setTimeout(cb, 100);\n  }\n};\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _objectSpread({}, inintialState);\n\n    _this.clearState = function () {\n      _this.setState(_objectSpread({}, inintialState));\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (event, signinUser) {\n      event.preventDefault();\n\n      _this.setState({\n        isLoading: true\n      }, function () {\n        signinUser().then(function (_ref) {\n          var data = _ref.data;\n          // this.setState({ isLoading: false });\n          console.log(data); //console.log('Data:::', this.state)\n\n          localStorage.setItem(\"token\", data.signinUser.token);\n          message.success(_this.state.message);\n\n          _this.props.history.push(\"/home\");\n\n          console.log(\"Data:::\", _this.state);\n        }).catch(function (error) {\n          message.error(error.message);\n          console.log(\"i am error\", error.message);\n        });\n\n        _this.clearState();\n      });\n    };\n\n    _this.validateForm = function () {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n      var isInvalid = !username || !password;\n      return isInvalid;\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        return _this2.setState({\n          isLoading: false\n        });\n      }, 5000); //    setTimeout(\n      //   function() {\n      //     this.setState({ isLoading: false });\n      //   }.bind(this),\n      //   2000\n      // );\n    } // login = () => {\n    //   fakeAuth.authenticate(() => {\n    //     this.setState(() => ({\n    //       redirectToReferrer: true\n    //     }));\n    //   });\n    // };\n\n  }, {\n    key: \"isAuthenticated\",\n    value: function isAuthenticated() {\n      var token = localStorage.getItem(\"token\");\n      return token && token.length > 10;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var isAuthenticated = this.isAuthenticated();\n      var redirectToReferrer = this.state.redirectToReferrer;\n\n      var _ref2 = this.props.location.state || {\n        from: {\n          pathname: \"/\"\n        }\n      },\n          from = _ref2.from; // if(redirectToReferrer === true ){\n      //   return( <Redirect to= '/' />)\n      // }\n\n\n      if (localStorage.getItem(\"token\")) {\n        return React.createElement(Redirect, {\n          to: \"/home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        });\n      }\n\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          password = _this$state2.password,\n          isLoading = _this$state2.isLoading;\n\n      if (isLoading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(Spinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }));\n      }\n\n      if (isLoading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(Errors, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }));\n      } // else {\n\n\n      return React.createElement(Query, {\n        query: GET_ALL_USER,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, function (_ref3) {\n        var data = _ref3.data,\n            loading = _ref3.loading;\n        //  console.log(\"it is a data\",data.getAllUser);\n        if (loading) return React.createElement(Spinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        });\n        return React.createElement(\"div\", {\n          className: \"conatainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, React.createElement(Col, {\n          span: 12,\n          offset: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"login-form{\",\n          style: {\n            display: \"flex\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            margin: 130\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(Mutation, {\n          mutation: SIGNIN_USER,\n          variables: {\n            username: username,\n            password: password\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, function (signinUser, _ref4) {\n          var data = _ref4.data,\n              Loading = _ref4.Loading,\n              error = _ref4.error;\n\n          if (Loading) {\n            return React.createElement(Spinner, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 166\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(Form, {\n            className: \"login-form\",\n            style: {\n              width: 400,\n              backgroundColor: \"white\"\n            },\n            onSubmit: function onSubmit(event) {\n              return _this3.handleSubmit(event, signinUser);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            style: {\n              paddingTop: 30\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176\n            },\n            __self: this\n          }, React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"login100-form-title p-b-51\",\n            style: {\n              paddingLeft: 80\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            style: {\n              width: 80\n            },\n            src: require(\"../image/logo.jpg\"),\n            alt: \"\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182\n            },\n            __self: this\n          }), \"Signin\"))), React.createElement(FormItem, {\n            style: {\n              paddingLeft: 50,\n              paddingTop: 50\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, React.createElement(FormItem, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }, React.createElement(Input, {\n            className: \"input-sigin\",\n            name: \"username\",\n            value: username,\n            onChange: function onChange(event) {\n              return _this3.handleChange(event);\n            },\n            prefix: React.createElement(Icon, {\n              type: \"user\",\n              style: {\n                color: \"rgba(0,0,0,.25)\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 201\n              },\n              __self: this\n            }),\n            placeholder: \"Username\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195\n            },\n            __self: this\n          })), React.createElement(FormItem, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 209\n            },\n            __self: this\n          }, React.createElement(Input, {\n            className: \"input-sigin\",\n            name: \"password\",\n            value: password,\n            onChange: function onChange(event) {\n              return _this3.handleChange(event);\n            },\n            prefix: React.createElement(Icon, {\n              type: \"lock\",\n              style: {\n                color: \"rgba(0,0,0,.25)\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 216\n              },\n              __self: this\n            }),\n            type: \"password\",\n            placeholder: \"Password\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 210\n            },\n            __self: this\n          }))), React.createElement(FormItem, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 226\n            },\n            __self: this\n          }, React.createElement(Checkbox, {\n            className: \"checkBox\",\n            style: {\n              float: \"left\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 227\n            },\n            __self: this\n          }, \"Remember me\")), React.createElement(FormItem, {\n            style: {\n              paddingLeft: 80\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235\n            },\n            __self: this\n          }, React.createElement(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            className: \"login-form-button\",\n            disabled: Loading || _this3.validateForm(),\n            style: {\n              width: 210,\n              paddingLeft: 10\n            } // onClick={event =>this.handleSubmit(event, signinUser)}\n            ,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 236\n            },\n            __self: this\n          }, React.createElement(Icon, {\n            type: \"login\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 245\n            },\n            __self: this\n          }), \"Sign in\"), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248\n            },\n            __self: this\n          }, React.createElement(Errors, {\n            ref: error,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 249\n            },\n            __self: this\n          })), React.createElement(FormItem, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251\n            },\n            __self: this\n          }, error && React.createElement(Alert, {\n            style: {\n              marginRight: 20\n            },\n            message: \"Error\",\n            description: error.message,\n            type: \"error\",\n            showIcon: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 259\n            },\n            __self: this\n          }))), React.createElement(FormItem, {\n            className: \"register\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 269\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            href: \"/CreateEmployee\",\n            style: {\n              float: \"left\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 270\n            },\n            __self: this\n          }, \"Create Employee!\")));\n        }))))));\n      }); // }\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/home/praveen/Documents/Praveen-codes/HRM/client/src/component/login/login.js"],"names":["Form","Icon","Input","Button","Checkbox","message","notification","React","Row","Col","withRouter","Mutation","Query","SIGNIN_USER","GET_ALL_USER","GET_CURRENT_USER","Alert","Result","Spinner","Redirect","Notification","Errors","FormItem","Item","inintialState","username","password","isLoading","redirectToReferrer","fakeAuth","isAuthenticated","authenticate","cb","setTimeout","signout","Login","state","clearState","setState","handleChange","event","target","name","value","handleSubmit","signinUser","preventDefault","then","data","console","log","localStorage","setItem","token","success","props","history","push","catch","error","validateForm","isInvalid","getItem","length","location","from","pathname","loading","display","margin","Loading","width","backgroundColor","paddingTop","paddingLeft","require","color","float","marginRight","Component"],"mappings":"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","sourcesContent":["import {\n  Form,\n  Icon,\n  Input,\n  Button,\n  Checkbox,\n  message,\n  notification\n} from \"antd\";\nimport \"./index.css\";\nimport React from \"react\";\nimport { Row, Col } from \"antd\";\n// import {Animated} from \"react-animated-css\";\n// import logo from '../image/logo.jpg'\nimport { withRouter } from \"react-router\";\nimport { Mutation, Query } from \"react-apollo\";\nimport {\n  SIGNIN_USER,\n  GET_ALL_USER,\n  GET_CURRENT_USER\n} from \"../../queries/index\";\nimport { Alert, Result } from \"antd\";\nimport Spinner from \"../spinner/index\";\nimport { Redirect } from \"react-router-dom\";\nimport Notification from \"../dashboard/notification/\";\nimport Errors from \"../dashboard/error/index\";\n// import BackgroundImage from 'react-background-image-loader';\n\nconst FormItem = Form.Item;\n\nconst inintialState = {\n  username: \"\",\n  password: \"\",\n  message: \"Sucessfuly Logged In \",\n  isLoading: true,\n  redirectToReferrer: false\n};\nconst fakeAuth = {\n  isAuthenticated: true,\n  authenticate(cb) {\n    this.isAuthenticated = true;\n    setTimeout(cb, 100);\n  },\n  signout(cb) {\n    this.isAuthenticated = false;\n    setTimeout(cb, 100);\n  }\n};\n\nclass Login extends React.Component {\n  state = { ...inintialState };\n\n  componentDidMount() {\n    setTimeout(() => this.setState({ isLoading: false }), 5000);\n    //    setTimeout(\n    //   function() {\n    //     this.setState({ isLoading: false });\n    //   }.bind(this),\n    //   2000\n    // );\n  }\n\n  // login = () => {\n  //   fakeAuth.authenticate(() => {\n  //     this.setState(() => ({\n  //       redirectToReferrer: true\n  //     }));\n  //   });\n  // };\n\n  clearState = () => {\n    this.setState({ ...inintialState });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event, signinUser) => {\n    event.preventDefault();\n    this.setState({ isLoading: true }, () => {\n      signinUser()\n        .then(({ data }) => {\n          // this.setState({ isLoading: false });\n          console.log(data);\n          //console.log('Data:::', this.state)\n          localStorage.setItem(\"token\", data.signinUser.token);\n          message.success(this.state.message);\n          this.props.history.push(\"/home\");\n\n          console.log(\"Data:::\", this.state);\n        })\n        .catch(function(error) {\n          message.error(error.message);\n\n          console.log(\"i am error\", error.message);\n        });\n\n      this.clearState();\n    });\n  };\n\n  validateForm = () => {\n    const { username, password } = this.state;\n    const isInvalid = !username || !password;\n    return isInvalid;\n  };\n\n  isAuthenticated() {\n    const token = localStorage.getItem(\"token\");\n    return token && token.length > 10;\n  }\n\n  render() {\n    const isAuthenticated = this.isAuthenticated();\n\n    const { redirectToReferrer } = this.state;\n    const { from } = this.props.location.state || { from: { pathname: \"/\" } };\n    // if(redirectToReferrer === true ){\n    //   return( <Redirect to= '/' />)\n    // }\n\n    if (localStorage.getItem(\"token\")) {\n      return <Redirect to=\"/home\" />;\n    }\n    const { username, password, isLoading } = this.state;\n\n    if (isLoading) {\n      return (\n        <div>\n          {/* <image src={{ backgroundImage: \"../image/logo.jpg\" }} /> */}\n          <Spinner />\n        </div>\n      );\n    }\n    if (isLoading) {\n      return (\n        <div>\n          {/* <image src={{ backgroundImage: \"../image/logo.jpg\" }} /> */}\n          <Errors />\n        </div>\n      );\n    }\n\n    // else {\n    return (\n      <Query query={GET_ALL_USER}>\n        {({ data, loading }) => {\n          //  console.log(\"it is a data\",data.getAllUser);\n          if (loading) return <Spinner />;\n\n          return (\n            <div className=\"conatainer\">\n              <Row>\n                <Col span={12} offset={6}>\n                  <div className=\"login-form{\" style={{ display: \"flex\" }}>\n                    <div style={{ margin: 130 }}>\n                      <Mutation\n                        mutation={SIGNIN_USER}\n                        variables={{ username, password }}\n                      >\n                        {(signinUser, { data, Loading, error }) => {\n                          if (Loading) {\n                            return <Spinner />;\n                          }\n                          return (\n                            <Form\n                              className=\"login-form\"\n                              style={{ width: 400, backgroundColor: \"white\" }}\n                              onSubmit={event =>\n                                this.handleSubmit(event, signinUser)\n                              }\n                            >\n                              <div style={{ paddingTop: 30 }}>\n                                <strong>\n                                  <span\n                                    className=\"login100-form-title p-b-51\"\n                                    style={{ paddingLeft: 80 }}\n                                  >\n                                    <img\n                                      style={{ width: 80 }}\n                                      src={require(\"../image/logo.jpg\")}\n                                      alt=\"\"\n                                    />\n                                    Signin\n                                  </span>\n                                </strong>\n                              </div>\n                              <FormItem\n                                style={{ paddingLeft: 50, paddingTop: 50 }}\n                              >\n                                <FormItem>\n                                  <Input\n                                    className=\"input-sigin\"\n                                    name=\"username\"\n                                    value={username}\n                                    onChange={event => this.handleChange(event)}\n                                    prefix={\n                                      <Icon\n                                        type=\"user\"\n                                        style={{ color: \"rgba(0,0,0,.25)\" }}\n                                      />\n                                    }\n                                    placeholder=\"Username\"\n                                  />\n                                </FormItem>\n                                <FormItem>\n                                  <Input\n                                    className=\"input-sigin\"\n                                    name=\"password\"\n                                    value={password}\n                                    onChange={event => this.handleChange(event)}\n                                    prefix={\n                                      <Icon\n                                        type=\"lock\"\n                                        style={{ color: \"rgba(0,0,0,.25)\" }}\n                                      />\n                                    }\n                                    type=\"password\"\n                                    placeholder=\"Password\"\n                                  />\n                                </FormItem>\n                              </FormItem>\n                              <FormItem>\n                                <Checkbox\n                                  className=\"checkBox\"\n                                  style={{ float: \"left\" }}\n                                >\n                                  Remember me\n                                </Checkbox>\n                              </FormItem>\n\n                              <FormItem style={{ paddingLeft: 80 }}>\n                                <Button\n                                  type=\"primary\"\n                                  htmlType=\"submit\"\n                                  className=\"login-form-button\"\n                                  disabled={Loading || this.validateForm()}\n                                  style={{ width: 210, paddingLeft: 10 }}\n\n                                  // onClick={event =>this.handleSubmit(event, signinUser)}\n                                >\n                                  <Icon type=\"login\" />\n                                  Sign in\n                                </Button>\n                                <div>\n                                  <Errors ref={error} />\n                                </div>\n                                <FormItem>\n                                  {/* {error && <Result\n           type=\"error\"\n           title=\"Error\"\n           description={error.message}\n           actions={<Button size=\"large\" type=\"primary\">OK</Button>}\n         />} */}\n                                  {error && (\n                                    <Alert\n                                      style={{ marginRight: 20 }}\n                                      message=\"Error\"\n                                      description={error.message}\n                                      type=\"error\"\n                                      showIcon\n                                    />\n                                  )}\n                                </FormItem>\n                              </FormItem>\n                              <FormItem className=\"register\">\n                                <a\n                                  href=\"/CreateEmployee\"\n                                  style={{ float: \"left\" }}\n                                >\n                                  Create Employee!\n                                </a>\n                              </FormItem>\n                            </Form>\n                          );\n                        }}\n                      </Mutation>\n                    </div>\n                  </div>\n                </Col>\n              </Row>\n            </div>\n          );\n        }}\n      </Query>\n    );\n\n    // }\n  }\n}\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}